## mako

<%page expression_filter="h"/>

<%!
from django.utils.translation import ugettext as _
from openedx.core.djangolib.js_utils import js_escaped_string
from openedx.core.djangolib.markup import HTML, Text
%>

<%inherit file="../main.html"/>
<%namespace name='static' file='../static_content.html'/>

<%block name="title">
    <title>${_("Reset Your {platform_name} Password").format(platform_name=platform_name)}</title>
</%block>

<%block name="head_extra">
    <link type="text/css" rel="stylesheet" href="${STATIC_URL}paragon/static/paragon.min.css">
</%block>

<%block name="bodyclass">view-passwordreset</%block>

<%block name="body">
<div id="password-reset-confirm-container" class="login-register-content login-register">

    % if validlink:
        ${static.renderReact(
	        component="PasswordResetConfirmation",
	        id="password-reset-confirm-react",
	        props={
                'csrfToken': csrf_token,
                'errorMessage': js_escaped_string(err_msg) if err_msg else '',
            },
        )}
        <script>
 function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length > 1) {
            // Return the last occurrence of the cookie
            return parts[parts.length - 1].split(";")[0];
        }
        return undefined;
    }
    
    var myCookieValue = getCookie('openedx-language-preference');
    console.log(myCookieValue);

    window.addEventListener("load", function () {
    
                if (myCookieValue == 'nl-nl') {
                    // all the text intothe form , the first one is on the top
                    let text1 = document.querySelector('#passwordreset-form .section-title span')
                    let text2 = document.getElementById("new_password_help_text")
                    let text3 = document.getElementById("label-new_password1")
                    let text4 = document.getElementById("label-new_password2")
                    let text5 = document.querySelector('#error-new_password2 > span:nth-child(2)')
                    let text6 = document.querySelector('#passwordreset-form .paragon__btn')


                    if (text1) {
                        text1.innerText = "Wachtwoord opnieuw instellen"
                    }
                    if (text2) {
                        text2.innerText = "Voer uw nieuwe wachtwoord in en bevestig het."
                    }
                    if (text3) {
                        text3.innerText = "nieuw wachtwoord"
                    }
                    if (text4) {
                        text4.innerText = "Bevestig je wachtwoord."
                    }
                    if (text5) {
                        text5.innerText = "Fout: De wachtwoorden komen niet overeen."
                    }
                    if (text6) {
                        text6.innerText = "Mijn wachtwoord opnieuw instellen"
                    }
                }       
            }
        );

        </script>
    % else:
        <div class="status submission-error">
            <h4 class="message-title">${_("Invalid Password Reset Link")}</h4>
            <ul class="message-copy">
                ${Text(
                    _("This password reset link is invalid. It may have been used already. "
                       "To reset your password, go to the {start_link}sign-in{end_link} page and "
                       "select {start_strong}Forgot password{end_strong}."
                    )).format(
                        start_link=HTML('<a href="/login">'),
                        end_link=HTML('</a>'),
                        start_strong=HTML('<strong>'),
                        end_strong=HTML('</strong>')
                    )
                }
            </ul>
        </div>
    % endif
</div>
</%block>



 
